/**
 * Случайные таблицы для D&D 5e
 * На основе SRD и лучших практик мастеров
 */

// Интерфейс для записи в таблице
export interface TableEntry {
  roll: string; // Диапазон броска (например "1-2", "3", "95-100")
  result: string; // Результат
  details?: string; // Дополнительные детали
}

export interface RandomTable {
  id: string;
  category: string; // encounters, events, weather, loot, names, rumors
  name: string;
  description: string;
  diceFormula: string; // d100, d20, d12 и т.д.
  entries: TableEntry[];
}

// ===== СЛУЧАЙНЫЕ ВСТРЕЧИ =====

export const WILDERNESS_ENCOUNTERS: RandomTable = {
  id: 'wilderness_encounters',
  category: 'encounters',
  name: 'Встречи в дикой местности',
  description: 'Случайные встречи в лесах, полях, холмах (уровни 1-4)',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: 'Олень или стадо оленей', details: 'Мирные животные, можно попытаться подстрелить для еды' },
    { roll: '2', result: '1d4 Гоблинов', details: 'Патруль или собиратели. CR 1/4 каждый' },
    { roll: '3', result: 'Путешественник', details: 'Торговец, странник или пилигрим. Может поделиться слухами' },
    { roll: '4', result: '2d4 Волков', details: 'Голодная стая. CR 1/4 каждый' },
    { roll: '5', result: 'Заброшенный лагерь', details: 'Старый костёр, разбросанное снаряжение. Проверка Investigation DC 12 — найти улики' },
    { roll: '6', result: '1d6 Бандитов', details: 'Разбойники требуют "дорожную пошлину". CR 1/8 каждый' },
    { roll: '7', result: 'Странная погода', details: 'Внезапный туман, дождь или необычный ветер. Видимость ограничена' },
    { roll: '8', result: 'Гигантский паук', details: 'Прячется в деревьях. CR 1' },
    { roll: '9', result: 'Следопыт или охотник', details: 'Может указать дорогу или предупредить об опасности' },
    { roll: '10', result: 'Медведь', details: 'Защищает территорию. CR 1' },
    { roll: '11', result: 'Руины старого здания', details: 'Может быть убежищем или содержать сокровища/опасности' },
    { roll: '12', result: '1d4 Орков', details: 'Военный патруль. CR 1/2 каждый' },
    { roll: '13', result: 'Отшельник', details: 'Мудрый старик/старуха. Может дать совет или квест' },
    { roll: '14', result: 'Гарпия', details: 'Поёт заманивающую песню. CR 1' },
    { roll: '15', result: 'Повозка торговца', details: 'Возможность купить припасы или услышать новости' },
    { roll: '16', result: 'Ловушка', details: 'Яма с кольями или силки. Dex save DC 13' },
    { roll: '17', result: 'Стая птиц взлетает', details: 'Что-то их напугало. Perception DC 14 — услышать приближение опасности' },
    { roll: '18', result: 'Совомед', details: 'Территориальное чудовище. CR 3' },
    { roll: '19', result: 'Дружелюбный друид', details: 'Предлагает убежище или помощь с природой' },
    { roll: '20', result: 'Редкая находка', details: 'Магические травы, древний камень или небольшое сокровище (бросок по таблице находок)' },
  ],
};

export const CITY_ENCOUNTERS: RandomTable = {
  id: 'city_encounters',
  category: 'encounters',
  name: 'Встречи в городе',
  description: 'Случайные события в городах и крупных поселениях',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: 'Уличный торговец', details: 'Продаёт припасы, слухи или краденое' },
    { roll: '2', result: 'Попрошайка', details: 'Может знать полезную информацию за монету' },
    { roll: '3', result: '2d4 Городских стражников', details: 'Патруль. Могут попросить документы или расспросить' },
    { roll: '4', result: 'Уличная потасовка', details: 'Двое дерутся. Один может оказаться важным NPC' },
    { roll: '5', result: 'Карманник', details: 'Попытка кражи. Passive Perception 15 чтобы заметить. Dex save DC 14 чтобы поймать' },
    { roll: '6', result: 'Глашатай', details: 'Объявляет новости: турнир, казнь, прибытие знати, указ' },
    { roll: '7', result: 'Уличный музыкант', details: 'Может знать местные легенды или слухи за пожертвование' },
    { roll: '8', result: 'Похоронная процессия', details: 'Кто умер? Проверка Investigation — узнать обстоятельства' },
    { roll: '9', result: 'Торговец зовёт в свою лавку', details: 'Может продать что-то полезное или необычное' },
    { roll: '10', result: 'Ребёнок потерялся', details: 'Просит помочь найти родителей' },
    { roll: '11', result: 'Пожар в здании', details: 'Кто-то кричит о помощи изнутри' },
    { roll: '12', result: 'Культисты проповедуют', details: 'Странная религия или тёмный культ. Insight DC 12 — понять, что что-то не так' },
    { roll: '13', result: 'Аристократ с охраной', details: 'Может быть полезным контактом или квестодателем' },
    { roll: '14', result: 'Старый друг или знакомый', details: 'Кто-то из прошлого персонажей (связь с предысторией)' },
    { roll: '15', result: 'Странный запах или звук', details: 'Следствие преступления, магии или чего-то зловещего' },
    { roll: '16', result: 'Праздник или фестиваль', details: 'Веселье, конкурсы, возможность отдохнуть' },
    { roll: '17', result: 'Подозрительная слежка', details: 'Кто-то следит за партией. Perception DC 15 чтобы заметить' },
    { roll: '18', result: 'Нищий-информатор', details: 'Член воровской гильдии. Продаёт информацию' },
    { roll: '19', result: 'Магический инцидент', details: 'Заклинание вышло из-под контроля. Спасбросок или проверка Arcana' },
    { roll: '20', result: 'Важная встреча', details: 'Квестодатель, союзник или враг появляется "случайно"' },
  ],
};

export const DUNGEON_ENCOUNTERS: RandomTable = {
  id: 'dungeon_encounters',
  category: 'encounters',
  name: 'Встречи в подземелье',
  description: 'Случайные встречи в подземельях, пещерах, руинах (уровни 1-5)',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: '1d6 Крыс-великанов', details: 'CR 1/8 каждая. Могут быть переносчиками болезни' },
    { roll: '2', result: '2d4 Скелетов', details: 'CR 1/4 каждый. Стражи или остатки авантюристов' },
    { roll: '3', result: 'Странные звуки', details: 'Скрежет, шёпот, шаги. Источник неизвестен' },
    { roll: '4', result: '1d4 Зомби', details: 'CR 1/4 каждый. Бродят бесцельно' },
    { roll: '5', result: 'Ловушка', details: 'Падающий камень, ядовитая стрела, колючая яма. DC 15 Perception, DC 13 для обезвреживания' },
    { roll: '6', result: '2d6 Гоблинов', details: 'CR 1/4 каждый. Патруль или засада' },
    { roll: '7', result: 'Слизь или плесень', details: 'Жёлтая плесень, зелёная слизь. Con save DC 12' },
    { roll: '8', result: 'Обрушение', details: 'Потолок или стена трескается. Dex save DC 13, 2d6 урона' },
    { roll: '9', result: 'Гигантская многоножка', details: 'CR 1/4. Ядовитый укус' },
    { roll: '10', result: 'Странное эхо', details: 'Голоса повторяются. Может быть магия или иллюзия' },
    { roll: '11', result: '1d4 Теней', details: 'CR 1/2 каждая. Атакуют из темноты' },
    { roll: '12', result: 'Заброшенный лагерь', details: 'Останки авантюристов. Investigation DC 12 — найти подсказки или припасы' },
    { roll: '13', result: 'Призрак', details: 'CR 4. Привязан к месту своей смерти' },
    { roll: '14', result: 'Грибы', details: 'Некоторые светятся, некоторые ядовиты. Nature DC 12 — определить безопасные' },
    { roll: '15', result: '1 Огр', details: 'CR 2. Охраняет территорию' },
    { roll: '16', result: 'Подземная река', details: 'Можно следовать или переправиться. Athletics DC 13' },
    { roll: '17', result: '1d4 Гулей', details: 'CR 1 каждый. Пожиратели мертвецов' },
    { roll: '18', result: 'Магическая аномалия', details: 'Дикая магия, антимагическая зона, или телепортация' },
    { roll: '19', result: 'Мумия', details: 'CR 3. Страж древней гробницы' },
    { roll: '20', result: 'Сокровище!', details: 'Спрятанный клад, забытое сокровище (бросок по таблице сокровищ)' },
  ],
};

// ===== ПОГОДА =====

export const WEATHER_TABLE: RandomTable = {
  id: 'weather',
  category: 'weather',
  name: 'Погода',
  description: 'Погодные условия и их влияние на игру',
  diceFormula: 'd20',
  entries: [
    { roll: '1-12', result: 'Ясно', details: 'Нормальные условия видимости и передвижения' },
    { roll: '13-15', result: 'Облачно', details: 'Слегка пасмурно, но без осадков' },
    { roll: '16-17', result: 'Дождь', details: 'Лёгкий/сильный дождь. Помеха на Perception (слух). Следы легче находить' },
    { roll: '18', result: 'Туман', details: 'Видимость 60 футов. Помеха на Perception (зрение). Легко заблудиться' },
    { roll: '19', result: 'Снег/Град', details: 'Холод, скользко. Difficult terrain. Con save DC 10 каждый час или истощение' },
    { roll: '20', result: 'Шторм', details: 'Гроза, сильный ветер. Видимость 30 футов. Помеха на дальние атаки. Возможны удары молний' },
  ],
};

// ===== ГОРОДСКИЕ СОБЫТИЯ =====

export const CITY_EVENTS: RandomTable = {
  id: 'city_events',
  category: 'events',
  name: 'События в городе',
  description: 'Случайные городские события, которые оживляют локацию',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: 'Публичная казнь', details: 'Преступник на эшафоте. Кто он и за что? Возможность вмешаться' },
    { roll: '2', result: 'Рыночный день', details: 'Толпы народу, особые товары, карманники активны' },
    { roll: '3', result: 'Пожар', details: 'Здание горит. Люди кричат о помощи' },
    { roll: '4', result: 'Процессия знати', details: 'Важный аристократ проезжает. Возможность увидеть важную персону' },
    { roll: '5', result: 'Уличная проповедь', details: 'Священник или фанатик. Может быть культ' },
    { roll: '6', result: 'Турнир объявлен', details: 'Рыцарский турнир через несколько дней. Призовой фонд' },
    { roll: '7', result: 'Кража!', details: 'Кто-то кричит "Держи вора!". Погоня по улицам' },
    { roll: '8', result: 'Странный торговец', details: 'Продаёт экзотические товары или запрещённые предметы' },
    { roll: '9', result: 'Пьяная драка', details: 'В таверне или на улице. Стража придёт через 1d6 раундов' },
    { roll: '10', result: 'Празднование', details: 'Свадьба, рождение наследника, религиозный праздник' },
    { roll: '11', result: 'Эпидемия слухов', details: 'Все говорят о странных событиях (бросок по таблице слухов)' },
    { roll: '12', result: 'Арест', details: 'Стража хватает кого-то. Может быть ошибка или заговор' },
    { roll: '13', result: 'Уличное представление', details: 'Акробаты, музыканты, фокусник. Развлечение и отвлечение' },
    { roll: '14', result: 'Нищие просят милостыню', details: 'Один из них — замаскированный шпион или информатор' },
    { roll: '15', result: 'Конфликт гильдий', details: 'Напряжение между торговыми или воровскими гильдиями' },
    { roll: '16', result: 'Магический инцидент', details: 'Заклинание вышло из-под контроля. Хаос на улице' },
    { roll: '17', result: 'Похороны важной персоны', details: 'Кто умер и при каких обстоятельствах?' },
    { roll: '18', result: 'Слежка', details: 'Кто-то явно следит за партией. Кто и зачем?' },
    { roll: '19', result: 'Прибытие важного гостя', details: 'Посол, герой, монстр-охотник. Город в волнении' },
    { roll: '20', result: 'Покушение!', details: 'Попытка убийства важной персоны рядом с партией' },
  ],
};

// ===== СЛУХИ В ТАВЕРНЕ =====

export const TAVERN_RUMORS: RandomTable = {
  id: 'tavern_rumors',
  category: 'rumors',
  name: 'Слухи в таверне',
  description: 'Что можно услышать за кружкой эля',
  diceFormula: 'd12',
  entries: [
    { roll: '1', result: 'Говорят, в лесу видели огни', details: 'Правда: феи или блуждающие огоньки. Ложь: просто байки' },
    { roll: '2', result: 'Старая мельница проклята', details: 'Правда: там нежить. Ложь: просто пугают детей' },
    { roll: '3', result: 'Граф ищет наёмников', details: 'Правда: есть работа. Ложь: это ловушка' },
    { roll: '4', result: 'В горах нашли золото', details: 'Золотая лихорадка. Но там драконы или орки' },
    { roll: '5', result: 'Люди пропадают по ночам', details: 'Вампир, похититель или что-то ещё' },
    { roll: '6', result: 'Торговец продаёт карту к сокровищу', details: 'Может быть настоящая или подделка' },
    { roll: '7', result: 'В городе появился незнакомец в чёрном', details: 'Ассасин, маг или просто путешественник?' },
    { roll: '8', result: 'Скоро будет война', details: 'Напряжение между королевствами или кланами' },
    { roll: '9', result: 'Колодец желаний исполняет мечты', details: 'Магический колодец или просто суеверие?' },
    { roll: '10', result: 'Призрак бродит по замку', details: 'Старый лорд не может найти покой' },
    { roll: '11', result: 'Драконья чешуя найдена у реки', details: 'Дракон рядом? Или это останки старой битвы?' },
    { roll: '12', result: 'Секретная информация', details: 'Связано с текущим квестом или главным сюжетом (определяет мастер)' },
  ],
};

// ===== НАХОДКИ =====

export const LOOT_TRINKETS: RandomTable = {
  id: 'loot_trinkets',
  category: 'loot',
  name: 'Необычные находки',
  description: 'Странные, но интересные предметы',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: 'Потёртый медальон', details: 'Герб неизвестного дома. Может быть ценным для кого-то' },
    { roll: '2', result: 'Компас, который указывает не на север', details: 'Магический? Сломанный? Указывает на что-то важное?' },
    { roll: '3', result: 'Кость с выгравированными рунами', details: 'Может быть фокусом заклинания или ключом' },
    { roll: '4', result: 'Запечатанное письмо', details: 'Кому? От кого? Вскрыть или доставить?' },
    { roll: '5', result: 'Маленький кристалл', details: 'Слабо светится. Стоит 10-50 золотых или имеет магические свойства' },
    { roll: '6', result: 'Связка старых ключей', details: 'От чего эти ключи? Можно попытаться найти замки' },
    { roll: '7', result: 'Странная монета', details: 'Неизвестная чеканка. Может быть древней или из другого измерения' },
    { roll: '8', result: 'Флакон с неизвестной жидкостью', details: 'Arcana DC 15 — определить. Может быть зелье, яд или просто масло' },
    { roll: '9', result: 'Игральные кости', details: 'Утяжелённые для жульничества или обычные' },
    { roll: '10', result: 'Обрывок карты', details: 'Часть большой карты. Где остальное?' },
    { roll: '11', result: 'Музыкальная шкатулка', details: 'Играет печальную мелодию. Может содержать секрет' },
    { roll: '12', result: 'Зуб неизвестного существа', details: 'Очень большой. Nature DC 14 — определить от кого' },
    { roll: '13', result: 'Книга на незнакомом языке', details: 'Может содержать заклинание, карту или важную информацию' },
    { roll: '14', result: 'Кольцо без опознавательных знаков', details: 'Простое кольцо. Магическое? Обручальное? Печатка?' },
    { roll: '15', result: 'Перо экзотической птицы', details: 'Может быть компонентом заклинания или стоит денег (5-20 золотых)' },
    { roll: '16', result: 'Осколок зеркала', details: 'Показывает странные отражения. Магическое зеркало было разбито?' },
    { roll: '17', result: 'Амулет с символом', details: 'Религиозный символ неизвестного бога или культа' },
    { roll: '18', result: 'Татуировка на коже', details: 'Кто-то был помечен. Магическая татуировка?' },
    { roll: '19', result: 'Флакон с песком', details: 'Песок из особого места. Может быть компонентом ритуала' },
    { roll: '20', result: 'Магический предмет!', details: 'Случайный магический предмет (слабый, uncommon)' },
  ],
};

// ===== ИМЕНА (БЫСТРЫЕ) =====

export const QUICK_NAMES_HUMAN_MALE: string[] = [
  'Альберт', 'Бернард', 'Виктор', 'Гарольд', 'Дмитрий', 'Эдвард', 'Фредерик', 'Грегори',
  'Генри', 'Иван', 'Джон', 'Карл', 'Леонард', 'Маркус', 'Николай', 'Оливер',
  'Патрик', 'Квентин', 'Роберт', 'Стивен', 'Томас', 'Ульрих', 'Виктор', 'Уолтер',
];

export const QUICK_NAMES_HUMAN_FEMALE: string[] = [
  'Анна', 'Беатрис', 'Кларисса', 'Диана', 'Элеонора', 'Фиона', 'Грета', 'Хелена',
  'Изабелла', 'Джейн', 'Кэтрин', 'Лидия', 'Маргарет', 'Наталья', 'Оливия', 'Патриция',
  'Рэйчел', 'София', 'Тереза', 'Урсула', 'Виктория', 'Венди',
];

export const QUICK_NAMES_ELF: string[] = [
  'Аэлар', 'Эльдрин', 'Галадриэль', 'Леголас', 'Арвен', 'Тауриэль', 'Финрод', 'Селена',
  'Элронд', 'Галион', 'Ниенна', 'Феанор', 'Лириэль', 'Сильван', 'Мириэль', 'Глорфиндел',
];

export const QUICK_NAMES_DWARF: string[] = [
  'Торин', 'Балин', 'Дорин', 'Гимли', 'Фили', 'Кили', 'Бомбур', 'Дурин',
  'Торгрим', 'Барак', 'Железный Кулак', 'Каменная Борода', 'Громовой Молот', 'Рунный Страж',
];

export const TAVERN_NAMES: string[] = [
  'Золотой Дракон', 'Спящий Гигант', 'Пьяный Единорог', 'Старый Дуб', 'Весёлый Бард',
  'Скачущий Пони', 'Последний Привал', 'Зелёный Дракон', 'Серебряный Олень', 'Весёлый Медведь',
  'Красный Лев', 'Ржавый Меч', 'Утонувший Моряк', 'Полная Луна', 'Треснувший Щит',
];

// ===== ОСЛОЖНЕНИЯ В ПУТЕШЕСТВИИ =====

export const TRAVEL_COMPLICATIONS: RandomTable = {
  id: 'travel_complications',
  category: 'events',
  name: 'Осложнения в путешествии',
  description: 'Что может пойти не так в дороге',
  diceFormula: 'd12',
  entries: [
    { roll: '1', result: 'Заблудились', details: 'Survival DC 15 чтобы найти дорогу. Потеря 1d4 часов' },
    { roll: '2', result: 'Плохая погода', details: 'Шторм, метель или сильный дождь (бросок по таблице погоды)' },
    { roll: '3', result: 'Сломалось снаряжение', details: 'Верёвка порвалась, оружие затупилось, или повозка сломалась' },
    { roll: '4', result: 'Болезнь или отравление', details: 'Плохая еда или вода. Con save DC 12 или отравление' },
    { roll: '5', result: 'Встреча с враждебными', details: 'Бандиты, монстры или враждебные locals (случайный энкаунтер)' },
    { roll: '6', result: 'Потеря припасов', details: 'Еда испортилась, воду пролили. Нужно найти новые' },
    { roll: '7', result: 'Опасная местность', details: 'Болото, обрыв, горный переход. Athletics DC 13' },
    { roll: '8', result: 'Конфликт в партии', details: 'Ссора из-за направления, добычи или решения. Roleplay' },
    { roll: '9', result: 'Преследователи', details: 'Кто-то следует за партией. Враги или просто путники?' },
    { roll: '10', result: 'Магическая аномалия', details: 'Странный туман, искажение реальности, дикая магия' },
    { roll: '11', result: 'Травма', details: 'Кто-то из партии поскользнулся, ушибся. 1d6 урона' },
    { roll: '12', result: 'Неожиданная удача', details: 'Нашли короткий путь, встретили помощь, или избежали опасности' },
  ],
};

// ===== МАГАЗИН (СЛУЧАЙНЫЙ ТОВАР) =====

export const SHOP_INVENTORY: RandomTable = {
  id: 'shop_inventory',
  category: 'loot',
  name: 'Необычный товар в магазине',
  description: 'Что необычного есть у торговца',
  diceFormula: 'd20',
  entries: [
    { roll: '1', result: 'Зелье лечения', details: '50 золотых. Восстанавливает 2d4+2 HP' },
    { roll: '2', result: 'Противоядие', details: '50 золотых. Снимает отравление' },
    { roll: '3', result: 'Лечебное зелье высшего качества', details: '100 золотых. Восстанавливает 4d4+4 HP' },
    { roll: '4', result: 'Зелье невидимости', details: '180 золотых. 1 час невидимости' },
    { roll: '5', result: 'Свиток заклинания', details: '1 уровень - 50 зол, 2 уровень - 100 зол, 3 уровень - 200 зол (случайное заклинание)' },
    { roll: '6', result: 'Багровый плащ', details: '25 золотых. Стильно выглядит' },
    { roll: '7', result: 'Верёвка из паутины', details: '30 золотых. 50 футов, очень прочная' },
    { roll: '8', result: 'Светящийся камень', details: '10 золотых. Светит как факел, не гаснет' },
    { roll: '9', result: 'Перчатки вора', details: '75 золотых. +2 к Sleight of Hand' },
    { roll: '10', result: 'Компас навигатора', details: '50 золотых. Всегда указывает на север' },
    { roll: '11', result: 'Книга местных легенд', details: '20 золотых. Даёт преимущество на History для региона' },
    { roll: '12', result: 'Экзотическое животное', details: 'Обезьяна, попугай, змея. 10-50 золотых' },
    { roll: '13', result: 'Музыкальный инструмент высокого качества', details: '100 золотых. Даёт преимущество на Performance' },
    { roll: '14', result: 'Набор отмычек высокого качества', details: '50 золотых. +2 к взлому замков' },
    { roll: '15', result: 'Бутылка редкого вина', details: '50 золотых. Может произвести впечатление на аристократа' },
    { roll: '16', result: 'Карта местности', details: '30 золотых. Показывает окрестности на 50 миль' },
    { roll: '17', result: 'Амулет защиты', details: '100 золотых. +1 к AC (слабый магический предмет)' },
    { roll: '18', result: 'Кольцо с секретом', details: '80 золотых. Скрытое отделение для яда или записки' },
    { roll: '19', result: 'Очки чтения', details: '25 золотых. Помогают читать мелкий текст' },
    { roll: '20', result: 'Редкий магический предмет', details: 'Что-то необычное (определяет мастер или AI генерация)' },
  ],
};

// ===== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ =====

/**
 * Бросок по таблице
 */
export function rollOnTable(table: RandomTable): TableEntry {
  const dice = table.diceFormula;
  let maxRoll = 20;

  if (dice === 'd100') maxRoll = 100;
  else if (dice === 'd20') maxRoll = 20;
  else if (dice === 'd12') maxRoll = 12;
  else if (dice === 'd10') maxRoll = 10;
  else if (dice === 'd6') maxRoll = 6;

  const roll = Math.floor(Math.random() * maxRoll) + 1;

  // Находим подходящую запись
  for (const entry of table.entries) {
    if (matchesRoll(roll, entry.roll)) {
      return { ...entry, actualRoll: roll };
    }
  }

  // Если не нашли, возвращаем первую
  return { ...table.entries[0], actualRoll: roll };
}

function matchesRoll(roll: number, range: string): boolean {
  if (range.includes('-')) {
    const [min, max] = range.split('-').map(Number);
    return roll >= min && roll <= max;
  }
  return roll === Number(range);
}

/**
 * Получить все таблицы
 */
export function getAllTables(): RandomTable[] {
  return [
    WILDERNESS_ENCOUNTERS,
    CITY_ENCOUNTERS,
    DUNGEON_ENCOUNTERS,
    WEATHER_TABLE,
    CITY_EVENTS,
    TAVERN_RUMORS,
    TRAVEL_COMPLICATIONS,
    LOOT_TRINKETS,
  ];
}

/**
 * Получить таблицы по категории
 */
export function getTablesByCategory(category: string): RandomTable[] {
  return getAllTables().filter((t) => t.category === category);
}

/**
 * Получить случайное имя
 */
export function getRandomName(type: 'human_male' | 'human_female' | 'elf' | 'dwarf'): string {
  let names: string[];
  switch (type) {
    case 'human_male':
      names = QUICK_NAMES_HUMAN_MALE;
      break;
    case 'human_female':
      names = QUICK_NAMES_HUMAN_FEMALE;
      break;
    case 'elf':
      names = QUICK_NAMES_ELF;
      break;
    case 'dwarf':
      names = QUICK_NAMES_DWARF;
      break;
    default:
      names = QUICK_NAMES_HUMAN_MALE;
  }
  return names[Math.floor(Math.random() * names.length)];
}

/**
 * Получить случайное название таверны
 */
export function getRandomTavernName(): string {
  return TAVERN_NAMES[Math.floor(Math.random() * TAVERN_NAMES.length)];
}

// Добавляем свойство для отображения фактического броска
declare module './random-tables' {
  interface TableEntry {
    actualRoll?: number;
  }
}

