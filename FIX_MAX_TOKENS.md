# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –û—à–∏–±–∫–∞ max_tokens

## –ü—Ä–æ–±–ª–µ–º–∞
```
DeepSeek API error: Invalid max_tokens value, 
the valid range of max_tokens is [1, 8192]
```

## –ü—Ä–∏—á–∏–Ω–∞
DeepSeek API –∏–º–µ–µ—Ç –∂–µ—Å—Ç–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ: **–º–∞–∫—Å–∏–º—É–º 8192**.

–ú—ã –ø—ã—Ç–∞–ª–∏—Å—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å 16000 —Ç–æ–∫–µ–Ω–æ–≤, —á—Ç–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç.

## –†–µ—à–µ–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ª–∏–º–∏—Ç
```typescript
// src/app/api/generate/session/route.ts
maxTokens: 8192  // –ú–∞–∫—Å–∏–º—É–º –¥–ª—è DeepSeek API
```

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–º–ø—Ç
```typescript
// src/lib/prompts.ts
‚ö†Ô∏è –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –§–û–†–ú–ê–¢–£:
- –û–ø–∏—Å–∞–Ω–∏—è –ö–†–ê–¢–ö–û (1-2 –∞–±–∑–∞—Ü–∞ –º–∞–∫—Å)
- –ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏–∏ NPC –ö–†–ê–¢–ö–û (1 –∞–±–∑–∞—Ü)
- –¢–æ–ª—å–∫–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –¥–ª—è –∏–≥—Ä—ã
```

–¢–µ–ø–µ—Ä—å AI –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, –Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.

## –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–º–ø–∞–Ω–∏–∏ —Å 10 —Å—Ü–µ–Ω–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 5 —Å—é–∂–µ—Ç–Ω—ã—Ö NPC
- –ë–æ–µ–≤—ã–µ —ç–Ω–∫–∞—É–Ω—Ç–µ—Ä—ã —Å –º–æ–Ω—Å—Ç—Ä–∞–º–∏
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

### ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –û–ø–∏—Å–∞–Ω–∏—è —Å—Ü–µ–Ω: 1-2 –∞–±–∑–∞—Ü–∞ (–≤–º–µ—Å—Ç–æ 3-4)
- –ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏–∏ NPC: 1 –∞–±–∑–∞—Ü (–≤–º–µ—Å—Ç–æ 2-3)
- –ë–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π —Å—Ç–∏–ª—å

### üí° –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª–∏
–í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ:
1. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ü–µ–Ω—É
2. –ù–∞–∂–∞—Ç—å "–†–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ü–µ–Ω—É" ‚Üí –ø–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
3. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ NPC
4. –ù–∞–∂–∞—Ç—å "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏" ‚Üí –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—É—é –±–∏–æ–≥—Ä–∞—Ñ–∏—é

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—Ä–∞—Ç–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

1. **–ë—ã—Å—Ç—Ä–µ–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ = –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–≤–µ—Ç
2. **–î–µ—à–µ–≤–ª–µ** - –º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ = –º–µ–Ω—å—à–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –º–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –¥–µ—Ç–∞–ª–∏
4. **–§–æ–∫—É—Å –Ω–∞ –∏–≥—Ä–µ** - —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –õ–∏–º–∏—Ç—ã DeepSeek API
- **Max tokens:** 1-8192
- **–ú–æ–¥–µ–ª—å:** deepseek-chat
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0.14 input / $0.28 output –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤

### –ü—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
**8192 —Ç–æ–∫–µ–Ω–∞** ‚âà 32,000 —Å–∏–º–≤–æ–ª–æ–≤ ‚âà 6,000-8,000 —Å–ª–æ–≤

–≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è:
- ‚úÖ –ö–∞–º–ø–∞–Ω–∏—è —Å 10 —Å—Ü–µ–Ω–∞–º–∏
- ‚úÖ 5 –¥–µ—Ç–∞–ª—å–Ω—ã—Ö NPC
- ‚úÖ –ú–æ–Ω—Å—Ç—Ä—ã –∏ —ç–Ω–∫–∞—É–Ω—Ç–µ—Ä—ã
- ‚úÖ –°—é–∂–µ—Ç –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ OpenAI:

```bash
# .env
DEEPSEEK_API_KEY=""           # –û—Ç–∫–ª—é—á–∏—Ç—å DeepSeek
OPENAI_API_KEY="sk-..."       # –í–∫–ª—é—á–∏—Ç—å OpenAI
OPENAI_MODEL="gpt-4o-mini"    # –î–æ 16k —Ç–æ–∫–µ–Ω–æ–≤
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–º–ø–∞–Ω–∏–∏ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
=== DeepSeek Response ===
Tokens used: 7850
Completion tokens: 7200
Finish reason: stop           ‚Üê –£—Å–ø–µ—Ö!

=== Parsed Data ===
Title: –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ö–æ—Å—Ç—è–Ω–æ–π –ë–∞—à–Ω–∏
Scenes count: 10              ‚Üê 10 —Å—Ü–µ–Ω —Å–æ–∑–¥–∞–Ω–æ
NPCs count: 5                 ‚Üê 5 NPC —Å–æ–∑–¥–∞–Ω–æ

Total scenes created: 10      ‚Üê –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î
Total NPCs created: 5         ‚Üê –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î
```

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ!** –ú–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞–º–ø–∞–Ω–∏–π üöÄ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ª–∏–º–∏—Ç–∞—Ö: —Å–º. `DEEPSEEK_LIMITS.md`

