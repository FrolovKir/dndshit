# üìä –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è DeepSeek API

## –ö–ª—é—á–µ–≤—ã–µ –ª–∏–º–∏—Ç—ã

### Max Tokens
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** 1-8192 —Ç–æ–∫–µ–Ω–∞
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** 8192 (–º–∞–∫—Å–∏–º—É–º)
- **–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏:** `Invalid max_tokens value, the valid range of max_tokens is [1, 8192]`

### –ú–æ–¥–µ–ª—å
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `deepseek-chat`
- **Base URL:** `https://api.deepseek.com`

### –°—Ç–æ–∏–º–æ—Å—Ç—å (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
- Input: $0.14 / 1M tokens
- Output: $0.28 / 1M tokens
- **–í ~20 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ** —á–µ–º GPT-4o-mini

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–∏–º–∏—Ç–æ–º 8192

### ‚úÖ –ß—Ç–æ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ 8192 —Ç–æ–∫–µ–Ω–∞

–ü—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (1 —Ç–æ–∫–µ–Ω ‚âà 4 —Å–∏–º–≤–æ–ª–∞):
- **8192 —Ç–æ–∫–µ–Ω–∞** ‚âà 32,768 —Å–∏–º–≤–æ–ª–æ–≤ ‚âà 6,000-8,000 —Å–ª–æ–≤

–≠—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è:
- ‚úÖ 10 —Å—Ü–µ–Ω —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º (1-2 –∞–±–∑–∞—Ü–∞ –∫–∞–∂–¥–∞—è)
- ‚úÖ 5 NPC —Å –ø—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏–µ–π (1 –∞–±–∑–∞—Ü –∫–∞–∂–¥—ã–π)
- ‚úÖ –ú–æ–Ω—Å—Ç—Ä—ã –¥–ª—è –±–æ–µ–≤—ã—Ö —Å—Ü–µ–Ω
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Å—é–∂–µ—Ç –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏

### ‚ö†Ô∏è –ß—Ç–æ –ù–ï –ø–æ–º–µ—â–∞–µ—Ç—Å—è

- ‚ùå 10 —Å—Ü–µ–Ω —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º (3-4 –∞–±–∑–∞—Ü–∞)
- ‚ùå 5 NPC —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –ø—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏–µ–π (2-3 –∞–±–∑–∞—Ü–∞)
- ‚ùå –î–ª–∏–Ω–Ω–æ–µ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ö—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
```typescript
// ‚ùå –ü–ª–æ—Ö–æ (—Å–ª–∏—à–∫–æ–º –¥–µ—Ç–∞–ª—å–Ω–æ)
"description": "–ì–µ—Ä–æ–∏ –≤—Ö–æ–¥—è—Ç –≤ —Ç–µ–º–Ω—ã–π –∑–∞–ª. –í–æ–∑–¥—É—Ö –Ω–∞–ø–æ–ª–Ω–µ–Ω –∑–∞–ø–∞—Ö–æ–º..."
(3-4 –∞–±–∑–∞—Ü–∞)

// ‚úÖ –•–æ—Ä–æ—à–æ (–∫–æ–º–ø–∞–∫—Ç–Ω–æ)
"description": "–¢–µ–º–Ω—ã–π –∑–∞–ª —Å –∞–ª—Ç–∞—Ä–µ–º –≤ —Ü–µ–Ω—Ç—Ä–µ. –ü–∞—Ö–Ω–µ—Ç —Å–µ—Ä–æ–π. 
–°–ª—ã—à–Ω—ã —à–∞–≥–∏ –≤—Ä–∞–≥–æ–≤ –∏–∑ –¥–∞–ª—å–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã."
(1-2 –∞–±–∑–∞—Ü–∞)
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
```typescript
// ‚ùå –ü–ª–æ—Ö–æ
"personality": "–≠–ª–¥—Ä–∏–Ω - –º—É–¥—Ä—ã–π –∏ —Å–ø–æ–∫–æ–π–Ω—ã–π –≤–æ–ª—à–µ–±–Ω–∏–∫. 
–û–Ω –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å–æ–≤–µ—Ç–æ–º, –Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–µ–Ω —Å –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞–º–∏..."

// ‚úÖ –•–æ—Ä–æ—à–æ
"personality": "–ú—É–¥—Ä—ã–π, –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–π, –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å"
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤
–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª–∏:
1. **–ó–∞–ø—Ä–æ—Å 1:** –°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é (10 —Å—Ü–µ–Ω + 5 NPC) - –∫—Ä–∞—Ç–∫–æ
2. **–ó–∞–ø—Ä–æ—Å 2:** –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ü–µ–Ω—É - –¥–µ—Ç–∞–ª—å–Ω–æ
3. **–ó–∞–ø—Ä–æ—Å 3:** –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ NPC - –¥–µ—Ç–∞–ª—å–Ω–æ

### 4. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```typescript
// –î–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
- –°—é–∂–µ—Ç ‚úÖ
- –°—Ü–µ–Ω—ã (–Ω–∞–∑–≤–∞–Ω–∏—è + –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ) ‚úÖ
- NPC (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ) ‚úÖ
- –ú–æ–Ω—Å—Ç—Ä—ã ‚úÖ

// –î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ü–µ–Ω ‚≠ê
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏–∏ NPC ‚≠ê
- –î–∏–∞–ª–æ–≥–∏ –∏ –∫–≤–µ—Å—Ç—ã ‚≠ê
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –ª–æ–≥–∞—Ö
```
=== DeepSeek Response ===
Tokens used: 7850         ‚Üê –•–æ—Ä–æ—à–æ, –≤ –ª–∏–º–∏—Ç–µ
Completion tokens: 7200   ‚Üê –ë–ª–∏–∑–∫–æ –∫ –º–∞–∫—Å–∏–º—É–º—É
Finish reason: stop       ‚Üê –£—Å–ø–µ—Ö!
```

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
```
Tokens used: 8192         ‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç
Finish reason: length     ‚ö†Ô∏è –û—Ç–≤–µ—Ç –æ–±—Ä–µ–∑–∞–Ω!
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä–µ–º
- 5 —Å—Ü–µ–Ω + 3 NPC –≤–º–µ—Å—Ç–æ 10 + 5
- –¢–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∫–∞–º–ø–∞–Ω–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—ç—Ç–∞–ø–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```typescript
// –®–∞–≥ 1: –û—Å–Ω–æ–≤–∞ –∫–∞–º–ø–∞–Ω–∏–∏
POST /api/generate/session
‚Üí –ö–∞–º–ø–∞–Ω–∏—è —Å 10 —Å—Ü–µ–Ω–∞–º–∏ (–∫—Ä–∞—Ç–∫–æ)

// –®–∞–≥ 2: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã
POST /api/generate/scene
‚Üí –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ Scene #3

// –®–∞–≥ 3: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è NPC
POST /api/generate/npc
‚Üí –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ NPC
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: OpenAI fallback
–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:
```typescript
// .env
OPENAI_API_KEY="sk-..."
OPENAI_MODEL="gpt-4o-mini"  // –¥–æ 16k tokens
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** DeepSeek (8192) ‚úÖ
   - –ö–∞–º–ø–∞–Ω–∏—è —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - –î–µ—à–µ–≤–æ –∏ –±—ã—Å—Ç—Ä–æ

2. **–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏:** OpenAI (16k) ‚≠ê
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
   - –î–æ—Ä–æ–∂–µ, –Ω–æ –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤

3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** DeepSeek + OpenAI üéØ
   - –û—Å–Ω–æ–≤–∞ –Ω–∞ DeepSeek
   - –î–µ—Ç–∞–ª–∏ –Ω–∞ OpenAI –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

