#!/bin/bash

echo "==================================="
echo "Пересоздание базы данных"
echo "==================================="

echo ""
echo "ВНИМАНИЕ: Все данные в базе будут удалены!"
echo ""
read -p "Продолжить? (y/n) " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]
then
    exit 1
fi

echo ""
echo "[1/2] Полный сброс базы данных и применение миграций..."
npx prisma migrate reset --force

echo ""
echo "[2/2] Генерация Prisma Client..."
npx prisma generate

echo ""
echo "==================================="
echo "База данных успешно пересоздана!"
echo "==================================="
echo ""
echo "Теперь можно запустить приложение через ./start.sh"

