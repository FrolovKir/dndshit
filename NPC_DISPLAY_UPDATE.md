# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NPC

## üìã –û–±–∑–æ—Ä

–£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NPC —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞—Ö.

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### 1. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ NPC –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç NPCCard** (–≤ `/src/app/projects/[id]/page.tsx`):

- **–ü–æ—Ä—Ç—Ä–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞**: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –µ—Å–ª–∏ –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é
  - –†–∞–∑–º–µ—Ä: 32x32 (128px)
  - –ö—Ä–∞—Å–∏–≤–∞—è —Ä–∞–º–∫–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º primary —Ü–≤–µ—Ç–∞
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ª–µ–≤–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

- **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**:
  - –ò–º—è (–∑–∞–≥–æ–ª–æ–≤–æ–∫)
  - –†–∞—Å–∞, –∫–ª–∞—Å—Å, —É—Ä–æ–≤–µ–Ω—å
  - –ú–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ
  - –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (STR, DEX, CON, INT, WIS, CHA) - –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã
  - –í–Ω–µ—à–Ω–æ—Å—Ç—å (–∫—Ä–∞—Ç–∫–∞—è, 2 —Å—Ç—Ä–æ–∫–∏)

- **–†–∞—Å–∫—Ä—ã–≤–∞—é—â–∞—è—Å—è —Å–µ–∫—Ü–∏—è "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"**:
  - üí≠ –õ–∏—á–Ω–æ—Å—Ç—å (personality)
  - üìú –ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è (backstory)
  - üéØ –ú–æ—Ç–∏–≤–∞—Ü–∏–∏ (motivations)
  
- **–ê–Ω–∏–º–∞—Ü–∏—è**: –ø–ª–∞–≤–Ω–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è NPC

**EditNPCForm** (`/src/components/EditNPCForm.tsx`):

- **–°–µ–∫—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞**:
  - –ï—Å–ª–∏ –ø–æ—Ä—Ç—Ä–µ—Ç –µ—Å—Ç—å: –±–æ–ª—å—à–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  - –≠—Ñ—Ñ–µ–∫—Ç hover: –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–∞–º–∫–∏
  - –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏)
  - –ï—Å–ª–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ –Ω–µ—Ç: –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä —Å –∏–∫–æ–Ω–∫–æ–π üñºÔ∏è

- **–ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
  - ‚ú® "–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ä–µ—Ç" - –µ—Å–ª–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ –Ω–µ—Ç
  - üîÑ "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" - –µ—Å–ª–∏ –ø–æ—Ä—Ç—Ä–µ—Ç —É–∂–µ –µ—Å—Ç—å
  - ‚è≥ "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è..." - –≤–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ imageUrl**: —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üé® –î–∏–∑–∞–π–Ω

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- –†–∞–º–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–∞: `border-primary/20` —Å hover `border-primary/40`
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: —Ñ–æ–Ω `bg-gray-800/50`, –∑–Ω–∞—á–µ–Ω–∏—è –≤ `text-primary`
- –°–µ–∫—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö: –ø–æ—Ä—Ç—Ä–µ—Ç –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–æ–ª–æ–Ω–∫—É
- –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ: –ø–æ—Ä—Ç—Ä–µ—Ç —Å–ª–µ–≤–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–ø—Ä–∞–≤–∞
- –°–µ—Ç–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫: 6 –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å NPC
```typescript
interface NPC {
  id: string;
  name: string;
  race?: string;
  class?: string;
  level?: number;
  alignment?: string;
  personality?: string;
  backstory?: string;
  appearance?: string;
  motivations?: string;
  stats?: string; // JSON —Å—Ç—Ä–æ–∫–∞
  imageUrl?: string; // URL –ø–æ—Ä—Ç—Ä–µ—Ç–∞
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **NPCCard** - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ `expanded` –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –ü–∞—Ä—Å–∏–Ω–≥ JSON —Å—Ç–∞—Ç–æ–≤
   - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞

2. **EditNPCForm** - —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ `imageUrl` –¥–ª—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞
   - –§—É–Ω–∫—Ü–∏—è `handleGeneratePortrait()` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ imageUrl –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üìç –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`/projects/[id]`)
- –í–∫–ª–∞–¥–∫–∞ "NPC"
- –°–µ—Ç–∫–∞ 2 –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ)
- –ö–∞–∂–¥—ã–π NPC –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- –ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è

### –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ä–µ—Ç–æ–º
- –ö–Ω–æ–ø–∫–∞ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä NPC
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "NPC"
3. –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Ä—Ç—Ä–µ—Ç - —É–≤–∏–¥–∏—Ç–µ –µ–≥–æ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
4. –ù–∞–∂–º–∏—Ç–µ "‚ñº –ü–æ–¥—Ä–æ–±–Ω–µ–µ" –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ NPC
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–∏–º—è, —Ä–∞—Å–∞, –∫–ª–∞—Å—Å, –≤–Ω–µ—à–Ω–æ—Å—Ç—å)
3. –ù–∞–∂–º–∏—Ç–µ "‚ú® –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ä–µ—Ç"
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (~5-15 —Å–µ–∫—É–Ω–¥)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ä–µ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ NPC
2. –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –ø–æ—Ä—Ç—Ä–µ—Ç
3. –ù–∞–∂–º–∏—Ç–µ "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ü–æ—Ä—Ç—Ä–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ OpenAI DALL-E
- –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–π API –∫–ª—é—á
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.04 –∑–∞ –ø–æ—Ä—Ç—Ä–µ—Ç (DALL-E 3, standard quality)
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: 5-15 —Å–µ–∫—É–Ω–¥

## üîÑ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞
```
POST /api/generate/npc-portrait
Body: { npcId: string }
Response: { imageUrl: string }
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ NPC
```
PATCH /api/npcs/[id]
Body: { 
  name, race, npcClass, level, alignment,
  personality, backstory, appearance, motivations,
  stats, imageUrl 
}
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Card, Button)
- React useState –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π
- Prisma –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º:
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Ä—Ç—Ä–µ—Ç–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- [ ] –ì–∞–ª–µ—Ä–µ—è –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤
- [ ] –ú–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤


